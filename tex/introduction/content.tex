\chapter{Introduction} % (fold)
\label{cha:Introduction}

%	- ~1 context with issues arising
%	- (~ 0.5 common approaches)
%	- (~ 1 specifics to the case studies)
%	- ~1.5 common approaches and drawbacks (high-level)
%	- ~1 page new method intro high-level
%	- ~0.5 RQ/contributions
%	- ~0.5 overview

\iffalse
\section{Structure}

Problem in society
\begin{enumerate}
  \item Aging modern societies, changing demographics
  \item Shortage of cheap labor or nobody willing to do physically challenging
  task
  \item while advancements in natural language processing and computer vision
  led to large improvements, embodied systems are still dull and simplistic
  \item the raise of collaborative robots promises safe robots that are
  inherently safe in the proximity of humans
  \item the concept of mobile manipulation, whether legged or on wheels, gives
  robotic hardware the same capabilities as humans, sparking the hope that
  labor shortage can be compensated with such systems
\end{enumerate}
Robotics as solution
\begin{enumerate}
  \item Robots to take over dull work, such as operating warehouses, restocking
  shelf, package delivery, food harvesting, etc
  \item Robots can work endless hours
  \item Robots are yet to be deployed in human-shared environments because of
  dynamics of such environments and safety constraints
  \item One important part for deploying robots in human shared environments is
  trajectory generation, what commands to send to the motors such that the robot
  is getting closer to its goal
  \item concluding, the hardware is capable of being deployed, but the methods
  for generating safe trajectories is yet to be found
\end{enumerate}
Common approaches and their drawbacks
\begin{enumerate}
  \item behind fences: linear motions or once-computed collision free global paths
  \item this approach works independent of duration for planning as it is done
  once
  \item such approaches fail to cope with changing environments
  \item lead to the raise of local trajectory generation methods
  \item pure control approaches, such as operational space control or impedance
  control, are fast and explainable but fail to integrate the full problem,
  including self-collision avoidance, collision-avoidance
  \item method centered around optimization problem, consisting of an objective
  function and constraints is favorable for safety guarantees and optimality
  \item optimization-based methods have shown great success in autonomous driving
  but fail to meet real-time constraints for systems with more degrees of
  freedom
  \item learning based approaches are popular in the age of deep neural networks
  but fail to meet often fail to meet safety constraints and tend to overfit
  to the trained use-case, lack generalizability
\end{enumerate}
Geometric encoding as intermediate between control and trajectory generation
\begin{enumerate}
  \item trajectory generation must be reactive and generalizable
  \item Cartesian impedance control offers a very fast way, but does not include
  many important components
  \item in Cartesian impedance control, we model the problem as a spring-damper
  system
  \item that system is effectively a differential equation of second order for
  goal attraction
  \item the same could be done for any other components of trajectory generation
  \item set of ode's representing all the components
  \item the combinations describes a space in which some regions are desirable
  and some are not desirable
  \item the entire configuration space is thus equipped with a metric
  \item this shaped space is the encoding on which we can move towards a goal
  \item implicitly solving for most components
  \item this concept has been formalized as optimization fabrics
\end{enumerate}
Layout of this thesis
\begin{enumerate}
  \item introduction to optimization based techniques, specifically model
  predictive control
  \item introduction to differential geometry and optimization fabrics for
  trajectory generation
  \item model predictive control for whole-body control, this chapter highlights
  the issues with optimization-based methods
  \item dynamic optimization fabrics, this chapter makes important
  generalizations of fabrics to dynamic environments  
  \item symbolic optimization fabrics and automate tuning
  \item conclusion
\end{enumerate}
\fi

\section{Robots under the eyes of demographic change}

In a world grappling with the challenges of an aging
population, shifting demographics, and a scarcity of
affordable labor for physically demanding tasks, the need
for technological solutions is more pronounced than ever.
While strides in natural language processing and computer
vision have significantly improved our office activities,
embodied systems still lag behind in sophistication and core
capabilities.

Traditional robotic systems, though capable in certain
tasks, often lack the nuanced understanding and adaptability
required for dynamic, human-shared environments. The
emergence of collaborative robots promises safety in close
proximity to humans. These robots are designed to exist
safely alongside with their human counterparts. Next to
safety, robots must be equipped with a similar level of
mobility as humans to perform meaningful tasks. Mobility of
traditional robots is quite limited as they are statically
attached to structural elements of production lines. In the
aim of helping aging socities deal with labor shortage,
the next generation of robots must be safe for humans while
equipped with the same mobility capabilities.

\subsection{Mobile manipulation}

One key feature of modern robots for human-shared
environments, is mobility. The combination of highly mobile
ground vehicles and manipulators is referred to as mobile
manipulation. This concept enables robots to navigate and
interact with their surroundings in ways previously deemed
challenging. By endowing robots with the ability to move and
manipulate objects in diverse environments, we further open
avenues for addressing the mentioned societal challenges.
Specifically, mobile manipulators could be used for tasks
like warehouse operations, restocking shelves, and package
delivery to intricate processes like food harvesting.
By placing robots onto moving bases, necessary mobility for
human-shared environment can be achieved.
%Such
%robots offer a solution to alleviate humans from monotonous
%and physically demanding work and can address challenges
%related to labor shortages and reluctance to undertake
%arduous tasks.

\subsection{Challenges in robotics}

However, despite their potential, robots are noticeably absent from human-shared
environments. The complexities of such spaces, coupled with safety constraints,
present formidable challenges. This is where trajectory generation becomes
pivotal as one of the basic building blocks for robotics
software stacks.
It determines the commands sent to the motors, orchestrating a harmonious
movement that brings the robot closer to its goal while
ensuring the safety of itself and its environment.

Essentially, while the hardware is ready for deployment, the missing link lies
in methods for generating trajectories that prioritize
safety while providing high success rates. This dissertation
embarks on a journey to unravel this critical aspect of robotics, exploring
innovative trajectory generation methods that not only unlock the potential of
robotic hardware but also lead to a world where robots seamlessly coexist with
humans in shared spaces.

\section{Limitations of current approaches}

In the quest for effective trajectory generation, various
methods have emerged, each with its set of advantages and
drawbacks. The classical setup for robots, where they have
proven to be quite effective, is behind fences. This setup
simplifies trajectory generation dramatically as collision
avoidance can be done during the installation process and
trajectories can remain unchanged for the entire lifetime of
the robots. While such methods are independent of planning
duration, being computed once, their Achilles' heel lies in
their incapacity to adapt to dynamic, changing environments.

Recognizing this limitation has spurred the rise of local
trajectory generation methods, especially as robots are
expected to enter human-shared environments. However, even
within this domain, challenges persist. Pure control
approaches, exemplified by operational space control or
impedance control, offer speed and interpretability but fall
short in incorporating the entirety of the problem, such as
collision avoidance with itself and the environment or
joint limit avoidance.

With the aim for safe robots, many approaches these days
center around optimization problems, centered around an objective
function and constraints that favor safety guarantees and
optimality. Such approaches are often referred to as model
predictive control schemes or receding horizon
optimization. While optimization-based methods have
demonstrated success in autonomous driving applications,
they stumble when confronted with real-time constraints in
systems with increased degrees of freedom due to high
computational costs.

In the age of deep neural networks, learning-based approaches have gained
popularity as they promise similar performance to
optimization-based techniques. After all, they solve the
same problem, while changing the naming from objective to
reward. However, their drawback lies in their tendency to falter concerning
safety constraints, often succumbing to overfitting specific use cases during
training and lacking generalizability when confronted with new scenarios.

\section{Encoding trajectory generation in geometries}

It is also possible to formulate trajectory generation as a
purely geometric problem. One early attempt in that
direction is referred to as the potential field method,
where individual components are formulated as `hills' and
`valleys'. This approach is known to be very fast in terms
of run-time but only covers the static components of the
problem, and thus ignores the motion of the robot at each
time step.

Another notable contender is Cartesian
impedance control, praised for its rapid responsiveness and
perceived safety.
Cartesian impedance control models the point of interest
on the kinematic chain, usually the end-effector, as a
spring-damper-system. In contrast to potential field theory,
the motion of the robot is thus taken intro consideration.
However, it falls short by not encompassing crucial
components for a collision-free trajectory generation.
Modeling the point of interest of the robot as a
second-order differential equation raises the question
whether all components of the trajectory generation problem
can be handled in this way. 

In this dissertation, we introduce and extend a framework
that allows to iteratively design trajectory generation via
summation of individual behaviors. Individual behaviors are
designed as differential equations of second order for which
stability properties are conserved during summation.
This concept, elegantly formalized as "optimization
fabrics," offers a nuanced understanding of trajectory
generation. Informally speaking, the composition shapes the
landscape on which the trajectory is then generated.
Formally speaking, we gradually introduce terms into the
non-Riemannian metric shaping the smooth manifold of the
configuration space. In this thesis, we provide an important
extension to dynamic environments and give several use-cases
for this method.


\section{Outline}

After this introduction, this dissertation first introduces
relevant literature in the field of trajectory generation
and motion planning. Then, we summarize the required tools
from optimal control and from differential geometry to
understand the main chapters. In chapter 4, we explore a
model predictive control formulation for whole body control
with a mobile manipulator. We provide important steps to
handle the complexity of the problem. Then, we derive a
generalization of optimization fabrics to dynamic
environments, including contour tracking and avoidance with
moving obstacles. Chapter 6 highlights the benefits of
formulating trajectory generation in a symbolic way to
improve real-time capabilities and allow for online
parameter tuning. To relax the requirement for the
perception pipeline, we layout several ways to integrate
implicit environment representations into the framework of
optimization fabrics in chapter 7. Finally, we conclude this
thesis by summarizing the findings, their potential impact
on deploying robots in human-shared environments, and giving some
recommendations for future works.
